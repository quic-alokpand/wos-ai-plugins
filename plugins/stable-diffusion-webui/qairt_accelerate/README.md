
# <img src="docs\resources\main_icon.png" alt="drawing" style="width:40px;border-radius: 50%;"/> AUTOMATIC1111 stable-diffusion-webui Extension

Stable Diffusion WebUI can now be run on Qualcomm X-Elite NPU with [Qualcomm AI Runtime (QAIRT)](https://www.qualcomm.com/developer/software/qualcomm-ai-engine-direct-sdk). QAIRT support is provided through an custom extension script. The custom script uses QAIRT python APIs to run context binaries (.bin) generated by QAIRT SDK. We provide optimal performance by using QAIRT to run AI models on Qualcomm X-Elite NPU. These models are hosted on [Qualcomm AI hub](https://aihub.qualcomm.com/compute/models/stable_diffusion_v1_5_quantized?searchTerm=stable).

![sd1_5](docs/resources/qairt.gif)
<sub><sup>This clip is at 2x speed</sup></sup>


> **_NOTE:_**  Majority of the AUTOMATIC1111's features are not supported by this extension as of now and the extension is in active development. New feature support will be added incrementally. We actively welcome feedback and contributions from the community.

## Supported features

* Original txt2img mode with SD 1.5 and 2.1
* Sampling methods: DPM++ 2M
* Upscaling methods: ESRGAN-x4

## Instructions to run WebUI with QAIRT (Windows):

### Step 1: Download AUTOMATIC1111 stable-diffusion-webui
Run below commands in Windows PowerShell terminal.

```
# Make sure Python version is >=3.10.6 and <3.10.14
git clone https://github.com/AUTOMATIC1111/stable-diffusion-webui.git
cd stable-diffusion-webui
```

### Step 2: Download Extension
Download `stable-diffusion-webui-qairt-extension.zip` from the [latest release](https://github.com/quic/wos-ai-plugins/releases/tag/v1.0-automatic1111-webui).
Unzip and place the `qairt_accelerate` extension under `stable-diffusion-webui\extensions`

### Step 3: Launch the WebUI

```
$env:TORCH_INDEX_URL="https://download.pytorch.org/whl/cpu"
$env:WEBUI_LAUNCH_LIVE_OUTPUT=1

.\webui.bat --skip-torch-cuda-test --no-half --precision full --ui-config-file .\extensions\qairt_accelerate\ui-config.json
```

The steps above will create a virtual environment and install the required packages into this environment.
